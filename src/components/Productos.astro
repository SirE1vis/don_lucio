---
import Button from "@/components/Button.tsx";

const products = [
  {
    title: "Queso Fresco Pasteurizado",
    description:
      "Queso artesanal pasteurizado elaborado con leche fresca de alta calidad, suave textura y sabor delicado.",
    image: {
      png: `${import.meta.env.BASE_URL}images/queso-pasteurizado.png`,
      webp: `${import.meta.env.BASE_URL}images/queso-pasteurizado.webp`,
      alt: "queso-pasteurizado",
    },
  },
  {
    title: "Yogurt Natural",
    description:
      "Textura suave, perfecto para para consumirlo. Elaborado siguiendo técnicas tradicionales.",
    image: {
      png: `${import.meta.env.BASE_URL}images/yogurt.png`,
      webp: `${import.meta.env.BASE_URL}images/yogurt.webp`,
      alt: "yogurt natural",
    },
  },
];

const getGridClasses = (productCount: number) => {
  if (productCount === 1) {
    return "grid grid-cols-1 max-w-md mx-auto";
  } else if (productCount === 2) {
    return "grid grid-cols-1 md:grid-cols-2 lg:gap-16 max-w-4xl mx-auto";
  } else {
    return "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3";
  }
};

const gridClasses = getGridClasses(products.length);
---

<section class="w-full mt-24 md:mt-[120px]">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl text-amber-700 mb-4">
        Nuestros Productos
      </h2>
      <p class="text-black/85 text-xl md:text-2xl pt-5">
        Productos artesanales elaborados con los más altos estándares de calidad
      </p>
    </div>

    <div
      class={`${gridClasses} px-2 sm:px-4 md:px-6 lg:px-8 xl:px-12 gap-6 pt-16 md:pt-24`}
    >
      {
        products.map(({ title, description, image }, index) => (
          <div
            class="bg-white rounded-xl shadow-lg overflow-hidden flex flex-col h-full py-3 md:py-6"
            data-aos="fade-up"
            data-aos-delay={100 + index * 200}
            data-aos-duration="800"
          >
            <div class="block mx-auto w-1/2 aspect-square flex-shrink-0">
              <img
                src={image.webp}
                alt={image.alt}
                class="w-full h-full object-contain"
                loading="lazy"
                onerror={`this.onerror=null; this.src='${image.png}';`}
              />
            </div>

            <div class="p-6 flex flex-col flex-grow">
              <div class="flex-grow flex flex-col justify-start">
                <h3 class="text-lg md:text-xl text-center text-amber-700 mb-4 min-h-[2.5rem] flex items-center justify-center">
                  {title}
                </h3>
                <p class="text-base md:text-lg text-center text-black/75 flex-grow flex items-start justify-center">
                  {description}
                </p>
              </div>

              <div class="flex justify-center mt-6 pt-4">
                <Button
                  url="/contacto"
                  className="rounded-lg text-center text-amber-700 border-2 border-amber-600 hover:text-white hover:bg-amber-700 text-base md:text-lg text__glowing font-rocket"
                >
                  Comprar Producto
                </Button>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

